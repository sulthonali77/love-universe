<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Journey 3D - Fenda Enjelita</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --aurora-1: #3b82f6;
            --aurora-2: #a855f7;
            --aurora-3: #ec4899;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #020617;
            color: white;
            margin: 0;
            overflow: hidden;
        }

        /* --- BACKGROUND & AURORA --- */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -10;
        }

        .aurora {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, var(--aurora-1), var(--aurora-2), var(--aurora-3), transparent);
            opacity: 0.15;
            filter: blur(100px);
            animation: rotateAurora 20s linear infinite;
            z-index: -5;
            pointer-events: none;
        }

        @keyframes rotateAurora {
            from { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            to { transform: rotate(360deg) scale(1); }
        }

        /* --- SCENE CONTROL --- */
        .scene {
            display: none;
            position: absolute;
            inset: 0;
            opacity: 0;
            transition: opacity 1s ease-in-out, transform 1s cubic-bezier(0.16, 1, 0.3, 1);
            transform: scale(0.8) translateY(50px);
            z-index: 10;
        }

        .scene-active {
            display: flex !important;
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        /* --- TYPOGRAPHY --- */
        .cosmic-title {
            letter-spacing: 0.3em;
            text-transform: uppercase;
            line-height: 1.4;
            text-shadow: 0 0 30px rgba(167, 139, 250, 0.6);
        }

        /* --- BUTTONS --- */
        .btn-portal {
            position: relative;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-portal:hover {
            border-color: var(--aurora-2);
            box-shadow: 0 0 40px rgba(167, 139, 250, 0.4);
            transform: translateY(-5px);
        }

        /* --- MOON ELEMENT --- */
        .moon-bg {
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, #f8fafc 0%, #cbd5e1 50%, #94a3b8 100%);
            border-radius: 50%;
            filter: blur(2px);
            box-shadow: 0 0 100px rgba(255, 255, 255, 0.2), inset -20px -20px 60px rgba(0,0,0,0.5);
            z-index: -1;
            opacity: 0.8;
            animation: moonPulse 8s infinite alternate ease-in-out;
        }

        @keyframes moonPulse {
            from { transform: scale(1); opacity: 0.6; }
            to { transform: scale(1.1); opacity: 0.8; }
        }

        /* --- SCROLLBAR --- */
        .custom-scroll::-webkit-scrollbar { width: 5px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: var(--aurora-2); border-radius: 10px; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>
    <div class="aurora"></div>

    <!-- MAIN CONTAINER -->
    <main class="relative h-screen w-full flex items-center justify-center overflow-hidden">

        <!-- SCENE 1: THE GREAT MOON -->
        <section id="scene-1" class="scene scene-active flex-col">
            <div class="moon-bg opacity-30"></div>
            <div class="z-20 text-center px-6">
                <p class="text-lg md:text-xl font-light mb-6 tracking-[0.5em] text-blue-300">EST. 2025</p>
                <h1 class="text-4xl md:text-7xl font-black cosmic-title mb-12">
                    I LOVE YOU<br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400">IN EVERY UNIVERSE</span>
                </h1>
                <div class="h-24">
                    <button onclick="nextScene()" class="btn-portal px-12 py-4 rounded-full opacity-0 translate-y-10 transition-all duration-1000 delay-1000" id="btn-1">
                        MULAI PERJALANAN
                    </button>
                </div>
            </div>
            <!-- Benda langit tambahan -->
            <div class="absolute top-20 right-[15%] w-12 h-12 bg-red-900 rounded-full blur-[1px] opacity-40 animate-bounce"></div>
            <div class="absolute bottom-40 left-[10%] w-24 h-24 bg-blue-900 rounded-full blur-[2px] opacity-20"></div>
        </section>

        <!-- SCENE 2: GALAXY HEART -->
        <section id="scene-2" class="scene flex-col">
            <div class="max-w-4xl text-center space-y-12">
                <div class="relative inline-block">
                    <div class="absolute inset-0 bg-purple-500 blur-[80px] opacity-30 animate-pulse"></div>
                    <h2 class="text-5xl md:text-8xl font-black tracking-widest relative z-10 italic">
                        FENDA ENJELITA
                    </h2>
                </div>
                <p class="text-xl md:text-3xl font-thin tracking-[0.2em] text-gray-300">
                    Satu dari sejuta bintang yang paling terang.
                </p>
                <div class="flex justify-center space-x-4 opacity-50">
                    <div class="w-1 h-1 bg-white rounded-full"></div>
                    <div class="w-1 h-1 bg-white rounded-full"></div>
                    <div class="w-1 h-1 bg-white rounded-full"></div>
                </div>
                <button onclick="nextScene()" class="btn-portal px-12 py-4 rounded-full">TELUSURI RASI BINTANG</button>
            </div>
        </section>

        <!-- SCENE 3: 3D CONSTELLATION -->
        <section id="scene-3" class="scene flex-col">
            <div class="absolute top-10 left-0 w-full text-center z-50">
                <h2 class="text-2xl md:text-4xl font-black tracking-widest text-white neon-glow">RASI BINTANG KENANGAN</h2>
                <p class="text-sm text-gray-400 mt-2 uppercase tracking-widest">Tahan & Geser untuk Memutar â€¢ Klik Bintang untuk Detail</p>
            </div>
            
            <div id="three-container" class="w-full h-full cursor-move"></div>

            <div class="absolute bottom-10 z-50">
                <button onclick="nextScene()" class="btn-portal px-10 py-4 rounded-full">MASUK KE INTI GALAXY</button>
            </div>
        </section>

        <!-- SCENE 4: THE MESSAGE -->
        <section id="scene-4" class="scene">
            <div class="max-w-2xl mx-auto p-1 bg-gradient-to-br from-purple-500/20 to-blue-500/20 rounded-[2.5rem] backdrop-blur-3xl border border-white/10">
                <div class="bg-black/40 p-10 rounded-[2.4rem] space-y-8 text-center">
                    <h3 class="text-2xl font-black tracking-[0.3em] text-yellow-400 uppercase">Waktu Yang Berharga</h3>
                    <div class="text-left space-y-4 text-gray-200 text-sm md:text-base leading-relaxed custom-scroll max-h-[45vh] overflow-y-auto pr-4">
                        <p>Hari ini tuan rumah delapan belas desember kembali mengulang hari. Hari ini, izinkan aku langitkan semua doa terbaikku untuk kamu.</p>
                        <p>Semoga hal-hal yang membuat kamu runtuh turut menjadi alasan kamu untuk tumbuh. Semoga dunia senantiasa menjaga kamu di mana pun kamu berada. Semoga hari-hari kamu selalu diiringi doa yang tidak pernah ada batasnya. Dan semoga, senyum kedua orang tuamu yang selalu kamu usahakan itu kini sudah terlaksana.</p>
                        <p>Sebelumnya aku ingin mengucapkan terima kasih. Terima kasih karena pernah tinggal dan membantu pemiliknya untuk menjaga kehangatan rumahnya agar tetap nyaman untuk dihuni. Waktu yang singkat, namun kamu juga adalah peran utama karena sudah ikut andil dalam mewarnai hari-hari yang hanya berwarna hitam dan putih.</p>
                        <p>Selamat genap menjadi angka 22 di usiamu yang genap hari ini. Sudah banyak hal yang kamu lalui. Semoga selalu dikuatkan bahu pundak serta pikiran untuk setiap batu loncatan, meskipun dengan cara yang tidak pernah kamu pikirkan.</p>
                        <p>Semoga selalu dimampukan dalam meraih mimpi besar yang ingin kamu tuju. Semoga perjalanan baikmu selalu mendapat kebahagiaan setelahnya. Semoga tidak ada satupun yang menulikan telinganya saat hidupmu butuh pertolongan. Terima kasih telah menjadi bagian dari proses pendewasaan.</p>
                        <p class="font-bold text-blue-400">Selamat merayakan hari lahirmu, berjanjilah untuk hidup dengan baik dan berbahagialah. Terima kasih sudah lahir dan menjadi seseorang yang membawa kebahagiaan.</p>
                    </div>
                    <button onclick="nextScene()" class="btn-portal px-12 py-4 rounded-full mt-6">SAMPAI TUJUAN AKHIR</button>
                </div>
            </div>
        </section>

        <!-- SCENE 5: FINAL -->
        <section id="scene-5" class="scene flex-col">
            <h1 class="text-7xl md:text-9xl font-black italic tracking-tighter mb-4">SELAMANYA.</h1>
            <p class="text-xl text-gray-400 uppercase tracking-[0.5em]">Happy Birthday, Fenda Enjelita</p>
            <div class="mt-12">
                <button onclick="location.reload()" class="text-xs tracking-widest text-gray-500 hover:text-white transition">RESTART ORBIT</button>
            </div>
        </section>

    </main>

    <!-- Modal Zoom -->
    <div id="photo-modal" class="fixed inset-0 z-[100] flex items-center justify-center p-4 opacity-0 pointer-events-none transition-all duration-700 bg-black/95">
        <div class="relative max-w-xl w-full">
            <img id="modal-image" src="" class="w-full rounded-2xl shadow-2xl">
            <button onclick="closeModal()" class="absolute -top-16 right-0 text-white text-5xl font-thin">&times;</button>
        </div>
    </div>

    <script>
        // --- CORE STATE ---
        let currentScene = 1;
        let renderer, scene, camera, stars, constellationGroup;
        let mouseX = 0, mouseY = 0;
        let targetRotationX = 0, targetRotationY = 0;

        // --- BACKGROUND THREE.JS (Space Particles) ---
        function initBg() {
            const canvas = document.getElementById('bg-canvas');
            const bgRenderer = new THREE.WebGLRenderer({ canvas, alpha: true });
            bgRenderer.setSize(window.innerWidth, window.innerHeight);
            
            const bgScene = new THREE.Scene();
            const bgCamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
            bgCamera.position.z = 5;

            const starGeo = new THREE.BufferGeometry();
            const starCoords = [];
            for(let i=0; i<1500; i++) {
                starCoords.push(THREE.MathUtils.randFloatSpread(20), THREE.MathUtils.randFloatSpread(20), THREE.MathUtils.randFloatSpread(20));
            }
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starCoords, 3));
            const starMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.02 });
            const bgStars = new THREE.Points(starGeo, starMat);
            bgScene.add(bgStars);

            function animateBg() {
                requestAnimationFrame(animateBg);
                bgStars.rotation.y += 0.0005;
                bgRenderer.render(bgScene, bgCamera);
            }
            animateBg();

            window.addEventListener('resize', () => {
                bgCamera.aspect = window.innerWidth / window.innerHeight;
                bgCamera.updateProjectionMatrix();
                bgRenderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        // --- SCENE 3: 3D CONSTELLATION ---
        function init3DConstellation() {
            const container = document.getElementById('three-container');
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);

            constellationGroup = new THREE.Group();
            scene.add(constellationGroup);

            // Create Star Points
            const points = [
                {x: 2, y: 2, z: 0}, {x: 0, y: 3, z: 1}, {x: -2, y: 2, z: -1},
                {x: -3, y: 0, z: 0}, {x: -2, y: -2, z: 1}, {x: 0, y: -3, z: -1},
                {x: 2, y: -2, z: 0}, {x: 3, y: 0, z: 1}, {x: 0, y: 0, z: 2},
                {x: 1, y: 1, z: -2}
            ];

            // Texture Loader for Photos
            const loader = new THREE.TextureLoader();
            
            points.forEach((p, i) => {
                // Sphere for star
                const geo = new THREE.SphereGeometry(0.1, 16, 16);
                const mat = new THREE.MeshBasicMaterial({ color: 0x9333ea });
                const star = new THREE.Mesh(geo, mat);
                star.position.set(p.x, p.y, p.z);
                constellationGroup.add(star);

                // Sprite for photo (floating plane)
                const imgUrl = `https://placehold.co/200x200/4c1d95/ffffff?text=Kenangan+${i+1}`;
                loader.load(imgUrl, (texture) => {
                    const photoMat = new THREE.MeshBasicMaterial({ map: texture, transparent: true, opacity: 0.8 });
                    const photoGeo = new THREE.PlaneGeometry(0.8, 0.8);
                    const photoMesh = new THREE.Mesh(photoGeo, photoMat);
                    photoMesh.position.set(p.x, p.y + 0.6, p.z);
                    photoMesh.userData = { id: i, url: imgUrl };
                    constellationGroup.add(photoMesh);
                });
            });

            // Lines
            const lineMat = new THREE.LineBasicMaterial({ color: 0x581c87, transparent: true, opacity: 0.3 });
            for(let i=0; i<points.length; i++) {
                const next = (i + 1) % points.length;
                const lineGeo = new THREE.BufferGeometry().setFromPoints([
                    new THREE.Vector3(points[i].x, points[i].y, points[i].z),
                    new THREE.Vector3(points[next].x, points[next].y, points[next].z)
                ]);
                const line = new THREE.Line(lineGeo, lineMat);
                constellationGroup.add(line);
            }

            camera.position.z = 7;

            // Interaction
            container.addEventListener('mousedown', onMouseDown);
            container.addEventListener('mousemove', onMouseMove);
            container.addEventListener('touchstart', (e) => onMouseDown(e.touches[0]));
            container.addEventListener('touchmove', (e) => onMouseMove(e.touches[0]));

            function onMouseDown(e) {
                // Raycasting for clicks
                const raycaster = new THREE.Raycaster();
                const mouse = new THREE.Vector2();
                mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(constellationGroup.children);
                if (intersects.length > 0 && intersects[0].object.userData.url) {
                    openModal(intersects[0].object.userData.url);
                }
            }

            function animate() {
                requestAnimationFrame(animate);
                constellationGroup.rotation.y += (targetRotationY - constellationGroup.rotation.y) * 0.05;
                constellationGroup.rotation.x += (targetRotationX - constellationGroup.rotation.x) * 0.05;
                renderer.render(scene, camera);
            }
            animate();
        }

        function onMouseMove(e) {
            targetRotationY = (e.clientX / window.innerWidth - 0.5) * 4;
            targetRotationX = (e.clientY / window.innerHeight - 0.5) * 2;
        }

        // --- SCENE NAVIGATION ---
        function nextScene() {
            const current = document.getElementById(`scene-${currentScene}`);
            current.classList.remove('scene-active');
            
            // Warp effect on background
            document.querySelector('.aurora').style.transition = 'opacity 0.5s';
            document.querySelector('.aurora').style.opacity = '0.5';

            currentScene++;
            if (currentScene > 5) currentScene = 1;

            setTimeout(() => {
                document.querySelectorAll('.scene').forEach(s => s.classList.remove('scene-active'));
                const next = document.getElementById(`scene-${currentScene}`);
                next.classList.add('scene-active');
                document.querySelector('.aurora').style.opacity = '0.15';

                if(currentScene === 3) {
                    setTimeout(init3DConstellation, 100);
                }
            }, 800);
        }

        // --- MODAL ---
        function openModal(src) {
            const modal = document.getElementById('photo-modal');
            document.getElementById('modal-image').src = src;
            modal.classList.remove('opacity-0', 'pointer-events-none');
        }

        function closeModal() {
            document.getElementById('photo-modal').classList.add('opacity-0', 'pointer-events-none');
        }

        // --- INIT ---
        window.onload = () => {
            initBg();
            setTimeout(() => {
                document.getElementById('btn-1').classList.remove('opacity-0', 'translate-y-10');
            }, 500);
        };
    </script>
</body>
</html>
